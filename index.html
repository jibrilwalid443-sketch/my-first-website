<!DOCTYPE html>
<html>
<head>
    <title>My First Website</title>
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
    
</head>

<body>
    <h1>Hello, World!</h1>
    <p>This is my first website.</p>
    <img src="https://picsum.photos/300" alt="My image">
    <button onclick="sayHello()">Click Me</button>
   <p>Created by Walid</p>
   <hr>

<div class="todo-container">
  <h2>My To-Do App</h2>

  <input type="text" id="taskInput" placeholder="Enter a task">
<br><br>
<input type="date" id="dateInput">
<br><br>
    <input type="time" id="timeInput">
<br><br>
<button onclick="addTask()">Add Task</button>

<ul id="taskList"></ul>
</div>
    <script>
        if ("Notification" in window) {
  Notification.requestPermission();
        }

        
    document.addEventListener("DOMContentLoaded", loadTasks);

function getTasks() {
  let tasks = localStorage.getItem("tasks");
  return tasks ? JSON.parse(tasks) : [];
}

function addTask() {
  let taskInput = document.getElementById("taskInput");
  let dateInput = document.getElementById("dateInput");
  let timeInput = document.getElementById("timeInput");

  let task = taskInput.value.trim();
  let taskDate = dateInput.value;
  let taskTime = timeInput.value;

  if (task === "") {
    alert("Please enter a task");
    return;
  }

  let tasks = getTasks();
  tasks.push({
    text: task,
    date: taskDate,
    time: taskTime,
    completed: false
  });

  localStorage.setItem("tasks", JSON.stringify(tasks));

  taskInput.value = "";
  dateInput.value = "";
  timeInput.value = "";

  loadTasks();
        }

function loadTasks() {
  let taskList = document.getElementById("taskList");
  taskList.innerHTML = "";

  let tasks = getTasks();

  tasks.forEach((task, index) => {
    let li = document.createElement("li");

    li.innerHTML = `
      <span style="text-decoration:${task.completed ? 'line-through' : 'none'}">
        ${task.text} ${task.date ? "üìÖ " + task.date : ""}
      </span>
      <button onclick="toggleTask(${index})">‚úî</button>
      <button onclick="deleteTask(${index})">‚ùå</button>
    `;

    taskList.appendChild(li);
      scheduleNotification(task);
  });
}

function deleteTask(index) {
  let tasks = getTasks();
  tasks.splice(index, 1);
  localStorage.setItem("tasks", JSON.stringify(tasks));
  loadTasks();
}

function toggleTask(index) {
  let tasks = getTasks();
  tasks[index].completed = !tasks[index].completed;
  localStorage.setItem("tasks", JSON.stringify(tasks));
  loadTasks();
}
</script>
    <script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker
        .register("sw.js")
        .then(() => console.log("Service Worker registered"))
        .catch(err => console.log("SW error:", err));
    });
  }
        function scheduleNotification(task) {
  if (!task.date || !task.time) return;

  let taskTime = new Date(task.date + " " + task.time);
  let now = new Date();
  let delay = taskTime - now;

  if (delay > 0) {
    setTimeout(() => {
      new Notification("‚è∞ Reminder", {
        body: task.text
      });
    }, delay);
  }
        }
    </script>

</body>
</html>
